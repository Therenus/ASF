{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/svobo/Documents/Java_script/ASF/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/svobo/Documents/Java_script/ASF/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useContext,useEffect}from'react';import BookFinder from'../Apis/BookFinder';import{BookContext}from'../cAPI';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var BookList=function BookList(props){var _useContext=useContext(BookContext),books=_useContext.books,setBooks=_useContext.setBooks,selectedCategory=_useContext.selectedCategory;var navigate=useNavigate();useEffect(function(){var fetchdata=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,_response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!selectedCategory){_context.next=15;break;}_context.prev=1;console.log(\"Category:\",selectedCategory);_context.next=5;return BookFinder.get(\"/\",{params:{category:selectedCategory}});case 5:response=_context.sent;console.log(response);setBooks(response.data.data.books);_context.next=13;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);console.log(_context.t0);case 13:_context.next=26;break;case 15:_context.prev=15;console.log(\"Category: NO CAT\");_context.next=19;return BookFinder.get(\"/\");case 19:_response=_context.sent;setBooks(_response.data.data.books);_context.next=26;break;case 23:_context.prev=23;_context.t1=_context[\"catch\"](15);console.log(_context.t1);case 26:case\"end\":return _context.stop();}},_callee,null,[[1,10],[15,23]]);}));return function fetchdata(){return _ref.apply(this,arguments);};}();fetchdata();},[selectedCategory]);return/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{}),/*#__PURE__*/_jsx(\"input\",{className:\"form-control\",type:\"text\",value:selectedCategory,disabled:true,readOnly:true}),\" \"]}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped-columns\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"table-dark\",children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Title\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Author\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Year\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Publisher\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"ISBN\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:books&&books.map(function(books){return/*#__PURE__*/_jsxs(\"tr\",{onClick:function onClick(e){return navigate(\"/\".concat(books.isbn));},children:[/*#__PURE__*/_jsx(\"td\",{children:books.title}),/*#__PURE__*/_jsx(\"td\",{children:books.author}),/*#__PURE__*/_jsx(\"td\",{children:books.year}),/*#__PURE__*/_jsx(\"td\",{children:books.publisher}),/*#__PURE__*/_jsx(\"td\",{children:books.isbn})]},books.isbn);})})]})]});};export default BookList;","map":{"version":3,"names":["React","useContext","useEffect","BookFinder","BookContext","useNavigate","jsx","_jsx","jsxs","_jsxs","BookList","props","_useContext","books","setBooks","selectedCategory","navigate","fetchdata","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","_response","wrap","_callee$","_context","prev","next","console","log","get","params","category","sent","data","t0","t1","stop","apply","arguments","className","children","type","value","disabled","readOnly","scope","map","onClick","e","concat","isbn","title","author","year","publisher"],"sources":["C:/Users/svobo/Documents/Java_script/ASF/client/src/Components/BookList.jsx"],"sourcesContent":["import React, {useContext, useEffect} from 'react'\r\nimport BookFinder from '../Apis/BookFinder';\r\nimport { BookContext } from '../cAPI';\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nconst BookList = (props) => {\r\n  const {books, setBooks, selectedCategory} = useContext(BookContext)\r\n  \r\n  const navigate = useNavigate()\r\n\r\n  useEffect(() => {\r\n    const fetchdata = async () => {\r\n      if (selectedCategory) {\r\n        try {\r\n          console.log(\"Category:\", selectedCategory)\r\n          const response = await BookFinder.get(\"/\", { params: {category: selectedCategory}})\r\n          console.log (response)\r\n          setBooks(response.data.data.books);\r\n        } catch (err) {\r\n          console.log(err);\r\n        }\r\n      }else{\r\n        try {\r\n          console.log(\"Category: NO CAT\")\r\n          const response = await BookFinder.get(\"/\");\r\n          setBooks(response.data.data.books);\r\n        } catch (err) {\r\n          console.log(err);\r\n        }\r\n      }\r\n    }\r\n    fetchdata();\r\n  },[selectedCategory])\r\n\r\n  return (\r\n      <div className=\"mb-3\">\r\n        <div>\r\n        <label></label>  \r\n        <input className=\"form-control\" type=\"text\" value={selectedCategory} disabled readOnly /> </div>\r\n        <table className=\"table table-striped-columns\">\r\n          <thead>\r\n            <tr className=\"table-dark\">\r\n              <th scope=\"col\">Title</th>\r\n              <th scope=\"col\">Author</th>\r\n              <th scope=\"col\">Year</th>\r\n              <th scope=\"col\">Publisher</th>\r\n              <th scope=\"col\">ISBN</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {books && books.map((books) => {\r\n              return (\r\n                <tr onClick={(e) => navigate(`/${books.isbn}`)} key={books.isbn}>\r\n                  <td>{books.title}</td>\r\n                 <td>{books.author}</td>\r\n                  <td>{books.year}</td>\r\n                  <td>{books.publisher}</td>\r\n                  <td>{books.isbn}</td> \r\n                </tr>\r\n              )\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>      \r\n  )\r\n};\r\n\r\nexport default BookList\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}